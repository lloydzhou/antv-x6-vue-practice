(function(s,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue"),require("@antv/x6")):typeof define=="function"&&define.amd?define(["exports","vue","@antv/x6"],n):(s=typeof globalThis<"u"?globalThis:s||self,n(s["antv-x6-vue-practice"]={},s.Vue,s.X6))})(this,function(s,n,p){"use strict";const m=(o,e=[],t="node")=>{const i=[],h=[],a=[];if(o){const c=t==="node"?p.Node.create:p.Edge.create;e.forEach(d=>{const u=o.getCellById(d.id);if(u){const S=c(d),b=S.getProp();S.dispose(),p.ObjectExt.isEqual(u.getProp(),b)||h.push([u,b])}else i.push(c(d))});const r=new Set(e.map(d=>d.id));(t==="node"?o.getNodes():o.getEdges()).forEach(d=>{r.has(d.id)||a.push(d.id)})}return{create:i,update:h,remove:a}},g=(o,e)=>{const{create:t=[],update:i=[],remove:h=[]}=e;o&&o.batchUpdate("update",()=>{o.addCell(t),i.forEach(([a,c])=>{Object.keys(c).forEach(r=>a.setProp(r,c[r]))}),h.forEach(a=>o.removeCell(a))},e)},E=o=>({...o,id:o.id||p.StringExt.uuid()}),G=(o={})=>{const e=n.shallowReactive({nodes:n.markRaw([]),edges:n.markRaw([]),graph:null,setGraph:t=>t&&(e.graph=t),setNodes:t=>e.nodes=t.map(E),setEdges:t=>e.edges=t.map(E)});return n.watch(()=>m(e.graph,e.nodes,"node"),t=>g(e.graph,t)),n.watch(()=>m(e.graph,e.nodes&&e.edges,"edge"),t=>g(e.graph,t)),n.onMounted(()=>{e.setGraph(o.g)}),e},l=String(Symbol("x6ContextSymbol")),y=()=>n.inject(l),w=n.defineComponent({inheritAttrs:!1,name:"X6Graph",setup(o,{slots:e,attrs:t,expose:i}){const{className:h="react-x6-graph",container:a}=o,c=n.ref(a),r=G({});return n.provide(l,r),i(r),n.onMounted(()=>{if(Object.keys(t).forEach(f=>t[f]===""&&(t[f]=!0)),c.value){const f=new p.Graph({container:c.value,...t});r.setGraph(f)}}),()=>n.createVNode("div",{className:h,style:{width:"100%",height:"100%",position:"relative"}},[!a&&n.createVNode("div",{ref:c},null),r.graph&&n.createVNode(n.Fragment,null,[e.default?e.default():null])])}});s.Graph=w,s.contextSymbol=l,s.useGraphInstance=y,s.useGraphState=G,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
